<!DOCTYPE html>
<html>
<head>
  <title>游냥 Hog Social 游냥</title>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <style>
    body {
      background-color: #ffd6e6;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1, h2 { text-align: center; }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
    }
    button {
      background-color: #8b5e3c;
      color: white;
      padding: 10px;
      border: none;
      margin-top: 10px;
      border-radius: 10px;
      cursor: pointer;
    }
    .post {
      background: white;
      margin-top: 15px;
      padding: 10px;
      border-radius: 10px;
    }
    .oink {
      font-size: 18px;
      cursor: pointer;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h1>游냥 Hog Social</h1>
<h2>Welcome to The Trough</h2>

<input id="username" placeholder="Your hog name..." />
<textarea id="postBox" placeholder="Drop slop in the trough..."></textarea>
<button onclick="addPost()">Post to the Trough</button>

<div id="feed"></div>

<script>
  // 1. PASTE YOUR FIREBASE CONFIG HERE
  const firebaseConfig = {
    apiKey: "PASTE_HERE",
    authDomain: "PASTE_HERE",
    projectId: "PASTE_HERE",
    storageBucket: "PASTE_HERE",
    messagingSenderId: "PASTE_HERE",
    appId: "PASTE_HERE"
  };

  firebase.initializeApp(firebaseConfig);

  const db = firebase.firestore();
  const auth = firebase.auth();

  auth.signInAnonymously();

  function addPost() {
    const user = document.getElementById('username').value || "Anonymous Hog";
    const text = document.getElementById('postBox').value;
    if (!text) return;

    db.collection("posts").add({
      user: user,
      text: text,
      oinks: 0,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });

    document.getElementById('postBox').value = "";
  }

  function oink(id, currentOinks) {
    db.collection("posts").doc(id).update({
      oinks: currentOinks + 1
    });
  }

  db.collection("posts")
    .orderBy("createdAt", "desc")
    .onSnapshot((snapshot) => {
      const feed = document.getElementById('feed');
      feed.innerHTML = "";

      snapshot.forEach((doc) => {
        const post = doc.data();
        const postId = doc.id;

        feed.innerHTML += `
          <div class="post">
            <strong>${post.user}</strong><br>
            ${post.text}<br>
            <div class="oink" onclick="oink('${postId}', ${post.oinks || 0})">
              游냥 ${post.oinks || 0} oinks
            </div>
          </div>
        `;
      });
    });
</script>

</body>
</html>
